<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="api.css" type="text/css" rel="stylesheet" title="Standard style for API reference" />
<title>operateAffine - Affine transformation operation blending</title>
</head>
<body>
<h1><span class="fheader"><a name="top" id="top">ImageFunction.operateAffine</a></span></h1><div class="para">
<dl>
<dt>Function/Meaning</dt>
<dd><p>Affine transformation operation blending</p>
</dd>
<dt>Type</dt>
<dd><a class="jump" href="class_ImageFunction.html">Method of ImageFunction class</a></dd>
<dt>Syntax</dt>
<dd><span class="funcdecl">operateAffine(<span class="arg">dst</span>, <span class="arg">src</span>, <span class="arg">A</span>, <span class="arg">B</span>, <span class="arg">C</span>, <span class="arg">D</span>, <span class="arg">E</span>, <span class="arg">F</span>, <span class="arg">srcrect</span><span class="defarg">=<span class="defargval">null</span></span>, <span class="arg">cliprect</span><span class="defarg">=<span class="defargval">null</span></span>, <span class="arg">affine</span>, <span class="arg">mode</span><span class="defarg">=<span class="defargval">omAlpha</span></span>, <span class="arg">face</span><span class="defarg">=<span class="defargval">dfAlpha</span></span>, <span class="arg">opa</span><span class="defarg">=<span class="defargval">255</span></span>, <span class="arg">type</span><span class="defarg">=<span class="defargval">stNearest</span></span>, <span class="arg">hda</span><span class="defarg">=<span class="defargval">false</span></span>)</span></dd>
<dt>Arguments</dt>
<dd><table rules="all" frame="box" cellpadding="3" summary="Arguments of operateAffine">
<tr><td valign="top"><span class="argname">dst</span></td>
<td><p>Specifies the destination Bitmap object.</p>
</td></tr>
<tr><td valign="top"><span class="argname">src</span></td>
<td><p>Specifies the source Bitmap object.</p>
</td></tr>
<tr><td valign="top"><span class="argname">A</span></td>
<td><p>A parameter. Interpretation changes depending on the affine argument.</p>
</td></tr>
<tr><td valign="top"><span class="argname">B</span></td>
<td><p>B parameter. Interpretation changes depending on the affine argument.</p>
</td></tr>
<tr><td valign="top"><span class="argname">C</span></td>
<td><p>C parameter. Interpretation changes depending on the affine argument.</p>
</td></tr>
<tr><td valign="top"><span class="argname">D</span></td>
<td><p>D parameter. Interpretation changes depending on the affine argument.</p>
</td></tr>
<tr><td valign="top"><span class="argname">E</span></td>
<td><p>E parameter. Interpretation changes depending on the affine argument.</p>
</td></tr>
<tr><td valign="top"><span class="argname">F</span></td>
<td><p>F parameter. Interpretation changes depending on the affine argument.</p>
</td></tr>
<tr><td valign="top"><span class="argname">srcrect</span></td>
<td><p>Specifies the rectangle to be blended as a Rect object in pixels (at the source Bitmap's image position).<br />
If unspecified, the entire image is targeted.</p>
</td></tr>
<tr><td valign="top"><span class="argname">cliprect</span></td>
<td><p>Specifies the clipping rectangle as a Rect object (at the destination Bitmap's image position).<br />
If unspecified, no clipping is performed.</p>
</td></tr>
<tr><td valign="top"><span class="argname">affine</span></td>
<td><p>Specifies how to handle the following six arguments (parameters A to F).<br />
If true is specified, the six parameters are interpreted as follows:<br />
A   : a of the 2D affine transformation matrix<br />
B   : b of the 2D affine transformation matrix<br />
C   : c of the 2D affine transformation matrix<br />
D   : d of the 2D affine transformation matrix<br />
E   : tx of the 2D affine transformation matrix<br />
F   : ty of the 2D affine transformation matrix<br />
By affine transformation, the source image position (x, y) (where the top-left corner of the source rectangle is (0, 0)) is converted to the destination image position (x', y') by the following formula:<br />
x' = a*x + c*y + tx, y' = b*x + d*y + ty<br />
If false is specified, the six parameters are interpreted as follows:<br />
A   : X coordinate position (x0) of the top-left corner of the source rectangle at the destination image position<br />
B   : Y coordinate position (y0) of the top-left corner of the source rectangle at the destination image position<br />
C   : X coordinate position (x1) of the top-right corner of the source rectangle at the destination image position<br />
D   : Y coordinate position (y1) of the top-right corner of the source rectangle at the destination image position<br />
E   : X coordinate position (x2) of the bottom-left corner of the source rectangle at the destination image position<br />
F   : Y coordinate position (y2) of the bottom-left corner of the source rectangle at the destination image position<br />
If false is specified, the destination position (x3, y3) corresponding to the bottom-right corner of the source is automatically calculated by the following formula:<br />
x3 = x1 - x0 + x2, y3 = y1 - y0 + y2</p>
</td></tr>
<tr><td valign="top"><span class="argname">mode</span></td>
<td><p>Specifies the operation mode.</p>

<ul>
<li>If omPsNormal is specified, Photoshop-compatible alpha blending is performed (not implemented in the current version).</li>
<li>If omPsAdditive is specified, Photoshop-compatible Linear Dodge blending is performed (not implemented in the current version).</li>
<li>If omPsSubtractive is specified, Photoshop-compatible Linear Burn blending is performed (not implemented in the current version).</li>
<li>If omPsMultiplicative is specified, Photoshop-compatible Multiply blending is performed (not implemented in the current version).</li>
<li>If omPsScreen is specified, Photoshop-compatible Screen blending is performed (not implemented in the current version).</li>
<li>If omPsOverlay is specified, Photoshop-compatible Overlay blending is performed (not implemented in the current version).</li>
<li>If omPsHardLight is specified, Photoshop-compatible Hard Light blending is performed (not implemented in the current version).</li>
<li>If omPsSoftLight is specified, Photoshop-compatible Soft Light blending is performed (not implemented in the current version).</li>
<li>If omPsColorDodge is specified, Photoshop-compatible Color Dodge blending is performed (not implemented in the current version).</li>
<li>If omPsColorDodge5 is specified, Photoshop version 5.x or lower compatible Color Dodge blending is performed (not implemented in the current version).</li>
<li>If omPsColorBurn is specified, Photoshop-compatible Color Burn blending is performed (not implemented in the current version).</li>
<li>If omPsLighten is specified, Photoshop-compatible Lighten blending is performed (not implemented in the current version).</li>
<li>If omPsDarken is specified, Photoshop-compatible Darken blending is performed (not implemented in the current version).</li>
<li>If omPsDifference is specified, Photoshop-compatible Difference blending is performed (not implemented in the current version).</li>
<li>If omPsDifference5 is specified, Photoshop version 5.x or lower compatible Difference blending is performed (not implemented in the current version).</li>
<li>If omPsExclusion is specified, Photoshop-compatible Exclusion blending is performed (not implemented in the current version).</li>
<li>If omAdditive is specified, additive blending is performed (not implemented in the current version).</li>
<li>If omSubtractive is specified, subtractive blending is performed (not implemented in the current version).</li>
<li>If omMultiplicative is specified, multiplicative blending is performed (not implemented in the current version).</li>
<li>If omDodge is specified, dodge blending is performed (not implemented in the current version).</li>
<li>If omDarken is specified, darken blending is performed (not implemented in the current version).</li>
<li>If omLighten is specified, lighten blending is performed (not implemented in the current version).</li>
<li>If omScreen is specified, screen multiplicative blending is performed (not implemented in the current version).</li>
<li>If omAlpha is specified, alpha blending is performed.</li>
<li>If omAddAlpha is specified, additive alpha blending is performed. In this case, if face is dfOpaque and hda is false, linear interpolation is possible by specifying stFastLinear for the type argument.</li>
<li>If omOpaque is specified, the alpha information of src is ignored, and src is always considered completely opaque. In this case, if face is dfOpaque and hda is false, linear interpolation is possible by specifying stFastLinear for the type argument.</li>
</ul>
</td></tr>
<tr><td valign="top"><span class="argname">face</span></td>
<td><p>Specifies the drawing method.</p>

<ul>
<li>If dfAlpha is specified, the image is treated as an image with an alpha channel and drawn.</li>
<li>If dfAddAlpha is specified, the image is treated as an image with an additive alpha channel and drawn.</li>
<li>If dfOpaque is specified, the image is treated as completely opaque and drawn.</li>
</ul>
</td></tr>
<tr><td valign="top"><span class="argname">opa</span></td>
<td><p>Specifies the opacity of the blending (0 - 255).</p>
</td></tr>
<tr><td valign="top"><span class="argname">type</span></td>
<td><p>Specifies the type of affine transformation.</p>

<ul>
<li>stNearest     : Nearest neighbor method is used</li>
<li>stFastLinear  : Low-precision linear interpolation is used (partially implemented)</li>
<li>stLinear      : Linear interpolation is used (not implemented)</li>
<li>stCubic       : Cubic interpolation is used (not implemented)</li>
</ul>

<p>The speed is faster in the order of stNearest > stFastLinear > stLinear > stCubic, but the image quality is lower for faster modes.<br />
For stFastLinear, stLinear, and stCubic, stRefNoClip can be additionally specified using a bitwise OR. In this case, it allows blending colors by referencing areas outside the bitmap being copied.<br />
If this is not specified, even if there is space around the source bitmap, it will not reference outside the source bitmap range (colors outside the range are considered to be the color of the nearest pixel within the range).</p>
</td></tr>
<tr><td valign="top"><span class="argname">hda</span></td>
<td><p>Specifies whether to protect the alpha channel.</p>
</td></tr>
</table></dd>
<dt>Return Value</dt>
<dd>None (void)</dd>
<dt>Description</dt>
<dd><p>Performs operation blending while applying an affine transformation to the specified source Bitmap rectangle onto the destination.</p>
</dd>
</dl>
</div>
</body>
</html>