<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="api.css" type="text/css" rel="stylesheet" title="Standard style for API reference" />
<title>exceptionHandler - Handler function for uncaught exceptions</title>
</head>
<body>
<h1><span class="fheader"><a name="top" id="top">System.exceptionHandler</a></span></h1><div class="para">
<dl>
<dt>Function/Meaning</dt>
<dd>Handler function for uncaught exceptions</dd>
<dt>Type</dt>
<dd>Property of the <a class="jump" href="class_System.html">System class</a></dd>
<dt>Description</dt>
<dd><p>Represents a function that handles uncaught exceptions (exceptions passed to the KiriKiri core without being caught anywhere).<br />
If null is specified, the default behavior occurs.<br />
The default behavior is: stop the delivery of asynchronous events (set System.eventDisabled to true), start outputting logs to a file (call Debug.logAsError), display a dialog box notifying the error, and indicate the location in the script editor.<br />
The handler function takes one argument, which is the exception object.<br />
If no handler function is specified, or if the handler function is null, or if the handler function returns false, the default behavior is performed.<br />
If the handler function returns true, the default behavior mentioned above is not performed.<br />
Consider the possibility of asynchronous events occurring while the handler function is executing.<br />
If the KiriKiri core can process asynchronous events, another unexpected exception might occur while the exception handler is running.<br />
To avoid this, usually, when performing processing that waits for something within the handler function (when KiriKiri has an opportunity to process asynchronous events), the occurrence of asynchronous events is stopped.<br />
Example:</p>

<p><code><br />
System.exceptionHandler = function (e){<br />
// This function is called when an exception not caught anywhere is caught by the system.<br />
// e is the exception object.<br />
if(e instanceof "ConductorException"){<br />
// In case of an exception thrown by the conductor<br />
Debug.logAsError();<br />
// Start writing logs to a file, etc.<br />
var event_disabled = System.eventDisabled;System.eventDisabled = true;<br />
// If an event occurs while displaying the reason for the error,<br />
// it can be troublesome, so temporarily stop event generation.<br />
System.inform(e.message);<br />
System.eventDisabled = event_disabled;<br />
// Restore the event generation state to its original value.<br />
return true;<br />
// Returning true prevents the core from handling the exception.<br />
}else{<br />
return false;<br />
// Returning false performs normal exception handling.<br />
}<br />
};<br />
</code></p>
</dd>
<dt>See Also</dt>
<dd>
<a class="jump" href="prop_System_eventDisabled.html">System.eventDisabled</a><br />
<a class="jump" href="func_Debug_logAsError.html">Debug.logAsError</a><br />
</dd>
</dl>
</div>
</body>
</html>